{"content": "Nơi tổng_hợp và chia_sẻ những kiến_thức liên_quan tới giải_thuật nói_chung và lý_thuyết khoa_học máy_tính nói_riêng .\nin Đây là bài trả_lời cho bài_toán bug bug bug trên mà mình post mấy hôm_trước .\nXin vui_lòng để_lại comment nếu bạn có lời_giải tốt hơn; mình sẽ cập_nhật vào bài viết chính (tất nhiên cả thông_tin của tác giả) .\nBài_toán như_sau : Thông_thường , khi bạn được yêu_cầu viết code cho các câu_hỏi trên , bạn có_thể sẽ làm như_sau : Các đoạn code này thoạt nhìn có_vẻ đúng nhưng bên_trong nó tiềm_ẩn những lỗi nghiêm_trọng .\nTrong hai đoạn code trả_lời câu_hỏi (1) và (2) , lỗi cơ_bản mà ta có_thể gặp đó là tràn số .\nVí_dụ thì tổng và tích không còn có_thể biểu_diễn được bằng kiểu nữa .\nTrong đoạn code cho câu_hỏi (3) , ngoài lỗi tràn số , kết_quả trả về sẽ bị sai khi < .\nVí_dụ , đoạn mã sẽ trả về thay_vì . Một nhận_xét đơn_giản mà ta dễ thấy đó là kết_quả đầu_ra của các câu_hỏi trên có_thể biểu điên được bằng kiểu .\nTuy_nhiên , khi bạn nghĩ sâu hơn về làm thể_nào để tránh tràn số , bạn sẽ thấy trả_lời câu_hỏi này một_cách trọn_vẹn không_hề đơn_giản . Ngược_lại với bài_toán tổng_modulo , bài_toán hiệu modulo có_thể tính được dễ_dàng mà không sợ tràn số .\nTa có_thể giả_sử đều nhỏ hơn bằng cách lấy mod trước_khi tính hiệu .\nHiệu_số luôn có_thể biểu_diễn được bằng kiểu int .\nDo_đó , nếu () ta tính tính .\nNếu < , ta sẽ tính .\nChú_ý ở đây ta giả_sử a , b đều nhỏ hơn , do_đó < .\nCode : Bài_toán tổng_modulo có_thể quy về hiệu modulo bằng mẹo sau : Trước_khi ta chuyển về tính hiệu , ta đảm_bảo đều nhỏ hơn bằng cách lấy modulo .\nCode : Tính tích , ta sử_dụng ý_tưởng trong bài_tính lũy_thừa .\nTa sẽ gọi đệ_quy để tính và sử_dụng thủ_tục tính tổng_modulo để tính tổng .\nCode Thủ_tục đệ_quy có độ sâu .\nMỗi lần gọi đệ_quy , ta mất thao_tác bít để tính_từ kết_quả của lời gọi đệ_quy .\nDo_đó , tổng_số thao_tác bít là : Nếu tràn số_không xảy_ra , thủ_tục semi_sum ở phần giới_thiệu sẽ trả_lại kết_quả đúng nếu và trả_lại nếu ngược_lại .\nTa sẽ sử_dụng công_thức cơ_bản sau để biến_đổi nửa tổng về dạng mà ta có_thể tính đơn_giản được : Trường_hợp khác dấu , tràn số sẽ không bao_giờ xảy_ra .\nDo_đó , ta chỉ_cần kiểm_tra xem nếu , ta sẽ áp_dụng thủ_tục semi_sum , và áp_dụng nếu ngược_lại .\nTrường_hợp cùng dấu , ta giả_sử .\nTa có : Do , phần nguyên theo (4) có_thể tính như trong semi_sum (mà không lo tràn số vì cùng dấu) .\nCode : Code ở trên ta sử_dụng phép XOR () để kiểm_tra xem hai số có cùn dấu hay_không .\nHai số_nguyên cùng dấu khi và chỉ khi , ở đây là phép XOR bit .\nCode ở trên chỉ mang tính minh_họa .\nĐể code hiệu_quả hơn , ta có_thể thay_thế một_số thao_tác đại_số (kể cả lệnh rẽ nhánh if , then) bằng các thao_tác bít .\nVí_dụ , , . . . .\nXem thêm tại bài các . Code đầy_đủ : .\n1 Ruggieri , Salvatore .\nInformation_Processing_Letters 87 . 2 (2003) : 67-71 .\n, Trackback link : Powered by and\n", "tagged": "Nơi/N tổng_hợp/V và/Cc chia_sẻ/V những/L kiến_thức/N liên_quan/V tới/E giải_thuật/Np nói_chung/X và/Cc lý_thuyết/Np khoa_học/N máy_tính/N nói_riêng/X ./CH\nin/V Đây/P là/V bài/N trả_lời/V cho/E bài_toán/N bug/Np bug/Np bug/Np trên/E mà/C mình/P post/Np mấy/L hôm_trước/Np ./CH\nXin/V vui_lòng/Np để_lại/Np comment/Np nếu/C bạn/N có/V lời_giải/Np tốt/A hơn;/Np mình/P sẽ/R cập_nhật/V vào/E bài/N viết/V chính/T (tất/Np nhiên/Np cả/P thông_tin/N của/E tác/Np giả)/Np ./CH\nBài_toán/N như_sau/Np :/CH Thông_thường/A ,/CH khi/N bạn/N được/V yêu_cầu/V viết/V code/Np cho/E các/L câu_hỏi/N trên/E ,/CH bạn/N có_thể/R sẽ/R làm/V như_sau/Np :/CH Các/L đoạn/Nc code/Np này/P thoạt/Np nhìn/V có_vẻ/X đúng/A nhưng/C bên_trong/Np nó/P tiềm_ẩn/Np những/L lỗi/N nghiêm_trọng/A ./CH\nTrong/E hai/M đoạn/Nc code/Np trả_lời/V câu_hỏi/N (1)/Np và/Cc (2)/Np ,/CH lỗi/N cơ_bản/A mà/C ta/P có_thể/R gặp/V đó/P là/V tràn/V số/N ./CH\nVí_dụ/C thì/C tổng/N và/Cc tích/N không/R còn/R có_thể/R biểu_diễn/V được/V bằng/E kiểu/N nữa/R ./CH\nTrong/E đoạn/Nc code/Np cho/E câu_hỏi/N (3)/Np ,/CH ngoài/E lỗi/N tràn/V số/N ,/CH kết_quả/N trả/V về/E sẽ/R bị/V sai/A khi/N </Np ./CH\nVí_dụ/C ,/CH đoạn/Nc mã/N sẽ/R trả/V về/E thay_vì/X ./CH Một/M nhận_xét/N đơn_giản/A mà/C ta/P dễ/A thấy/V đó/P là/V kết_quả/N đầu_ra/N của/E các/L câu_hỏi/N trên/E có_thể/R biểu/Np điên/A được/V bằng/E kiểu/N ./CH\nTuy_nhiên/C ,/CH khi/N bạn/N nghĩ/V sâu/A hơn/A về/E làm/V thể_nào/X để/E tránh/V tràn/V số/N ,/CH bạn/N sẽ/R thấy/V trả_lời/V câu_hỏi/N này/P một_cách/N trọn_vẹn/A không_hề/Np đơn_giản/A ./CH Ngược_lại/X với/E bài_toán/N tổng_modulo/Np ,/CH bài_toán/N hiệu/N modulo/Np có_thể/R tính/V được/V dễ_dàng/A mà/C không/R sợ/V tràn/V số/N ./CH\nTa/P có_thể/R giả_sử/Np đều/R nhỏ/A hơn/A bằng/E cách/N lấy/V mod/Np trước_khi/Np tính/V hiệu/N ./CH\nHiệu_số/N luôn/R có_thể/R biểu_diễn/V được/V bằng/E kiểu/N int/Np ./CH\nDo_đó/C ,/CH nếu/C ()/Np ta/P tính/V tính/V ./CH\nNếu/C </Np ,/CH ta/P sẽ/R tính/V ./CH\nChú_ý/V ở/E đây/P ta/P giả_sử/Np a/Ni ,/CH b/Ni đều/R nhỏ/A hơn/A ,/CH do_đó/C </Np ./CH\nCode/Np :/CH Bài_toán/N tổng_modulo/Np có_thể/R quy/Np về/E hiệu/N modulo/Np bằng/E mẹo/N sau/E :/CH Trước_khi/Np ta/P chuyển/V về/E tính/V hiệu/N ,/CH ta/P đảm_bảo/V đều/R nhỏ/A hơn/A bằng/E cách/N lấy/V modulo/Np ./CH\nCode/Np :/CH Tính/V tích/N ,/CH ta/P sử_dụng/V ý_tưởng/N trong/E bài_tính/N lũy_thừa/Np ./CH\nTa/P sẽ/R gọi/V đệ_quy/Np để/E tính/V và/Cc sử_dụng/V thủ_tục/N tính/V tổng_modulo/Np để/E tính/V tổng/N ./CH\nCode/Np Thủ_tục/N đệ_quy/Np có/V độ/N sâu/A ./CH\nMỗi/L lần/N gọi/V đệ_quy/Np ,/CH ta/P mất/V thao_tác/V bít/V để/E tính_từ/Np kết_quả/N của/E lời/N gọi/V đệ_quy/Np ./CH\nDo_đó/C ,/CH tổng_số/N thao_tác/V bít/V là/V :/CH Nếu/C tràn/V số_không/Np xảy_ra/Np ,/CH thủ_tục/N semi_sum/Np ở/E phần/N giới_thiệu/V sẽ/R trả_lại/Np kết_quả/N đúng/A nếu/C và/Cc trả_lại/Np nếu/C ngược_lại/X ./CH\nTa/P sẽ/R sử_dụng/V công_thức/N cơ_bản/A sau/E để/E biến_đổi/V nửa/M tổng/N về/E dạng/N mà/C ta/P có_thể/R tính/V đơn_giản/A được/V :/CH Trường_hợp/N khác/A dấu/N ,/CH tràn/V số/N sẽ/R không/R bao_giờ/P xảy_ra/Np ./CH\nDo_đó/C ,/CH ta/P chỉ_cần/Np kiểm_tra/V xem/V nếu/C ,/CH ta/P sẽ/R áp_dụng/V thủ_tục/N semi_sum/Np ,/CH và/Cc áp_dụng/V nếu/C ngược_lại/X ./CH\nTrường_hợp/N cùng/A dấu/N ,/CH ta/P giả_sử/Np ./CH\nTa/P có/V :/CH Do/E ,/CH phần/N nguyên/A theo/V (4)/Np có_thể/R tính/V như/C trong/E semi_sum/Np (mà/Np không/R lo/V tràn/V số/N vì/E cùng/A dấu)/Np ./CH\nCode/Np :/CH Code/Np ở/E trên/E ta/P sử_dụng/V phép/N XOR/Np ()/Np để/E kiểm_tra/V xem/V hai/M số/N có/V cùn/Np dấu/N hay_không/Np ./CH\nHai/M số_nguyên/Np cùng/A dấu/N khi/N và/Cc chỉ/R khi/N ,/CH ở/E đây/P là/V phép/N XOR/Np bit/Np ./CH\nCode/Np ở/E trên/E chỉ/R mang/V tính/V minh_họa/V ./CH\nĐể/E code/Np hiệu_quả/N hơn/A ,/CH ta/P có_thể/R thay_thế/V một_số/L thao_tác/V đại_số/Np (kể/Np cả/P lệnh/N rẽ/V nhánh/N if/Np ,/CH then)/Np bằng/E các/L thao_tác/V bít/V ./CH\nVí_dụ/C ,/CH ,/CH ./CH ./CH ./CH ./CH\nXem/V thêm/V tại/E bài/N các/L ./CH Code/Np đầy_đủ/A :/CH ./CH\n1/M Ruggieri/Np ,/CH Salvatore/Np ./CH\nInformation_Processing_Letters/Np 87/M ./CH 2/M (2003)/Np :/CH 67-71/Np ./CH\n,/CH Trackback/Np link/Np :/CH Powered/Np by/Np and/Np\n", "title": "Tính tổng, tích modulo và bán tổng-- computing modulo sum, modulo product and semi-sum\n", "link": "http://www.giaithuatlaptrinh.com/?p=1117\n"}