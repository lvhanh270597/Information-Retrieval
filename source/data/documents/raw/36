Quay lui---Backtracking
http://www.giaithuatlaptrinh.com/?p=58
NÆ¡i tá»•ng há»£p vÃ  chia sáº» nhá»¯ng kiáº¿n thá»©c liÃªn quan tá»›i giáº£i thuáº­t nÃ³i chung vÃ  lÃ½ thuyáº¿t khoa há»c mÃ¡y tÃ­nh nÃ³i riÃªng.   in  | Quy lui lÃ  má»™t kÄ© thuáº­t thiáº¿t káº¿ giáº£i thuáº­t dá»±a trÃªn Ä‘á»‡ quy. Ã tÆ°á»Ÿng cá»§a quay lui lÃ  tÃ¬m lá»i giáº£i tá»«ng bÆ°á»›c, má»—i bÆ°á»›c chá»n má»™t trong sá»‘ cÃ¡c lá»±a chá»n kháº£ dÄ© vÃ  Ä‘á»‡ quy. Ok. CÃ³ váº» váº«n chÆ°a Ä‘Æ°á»£c rÃµ rÃ ng láº¯m. Giá» chÃºng ta xem xÃ©t má»™t vÃ i vÃ­ dá»¥ vÃ  khÃ¡i quÃ¡t hÃ³a phÆ°Æ¡ng phÃ¡p quay lui.  BÃ i toÃ¡n nhÆ° sau:Â : ta tháº¥y Ä‘á»ƒ cÃ¡c quÃ¢n hÃ¢u khÃ´ng Äƒn Ä‘Æ°á»£c nhau, ta pháº£i xáº¿p  quÃ¢n háº­u trÃªn  hÃ ng cá»§a bÃ n cá». Ta dÃ¹ng máº£ng , trong Ä‘Ã³  náº¿u quÃ¢n háº­u á»Ÿ hÃ ng thá»©  Ä‘Æ°á»£c Ä‘áº·t á»Ÿ cá»™t .: giáº£ sá»­ chÃºng ta Ä‘Ã£ Ä‘áº·t Ä‘Æ°á»£c  quÃ¢n háº­u, ,  trÃªn  hÃ ng Ä‘áº§u tiÃªn sao cho khÃ´ng cÃ³ 2 quÃ¢n háº­u nÃ o Äƒn Ä‘Æ°á»£c nhau. Cá»¥ thá»ƒ cÃ¡c pháº§n tá»­  sáº½ khÃ¡c  vÃ  cÃ¡c pháº§n tá»­  Ä‘á»u báº±ng . ChÃºng ta tÃ¬m cÃ¡ch Ä‘áº·t má»™t quÃ¢n háº­u trÃªn hÃ ng thá»© . Ta sáº½ thá»­ láº§n lÆ°á»£t Ä‘áº·t vÃ o cá»™t thá»© . Náº¿u Ä‘áº·t vÃ o cá»™t thá»©  mÃ  bá»‹ má»™t trong  quÃ¢n háº­u Ä‘Ã£ Ä‘áº·t trÆ°á»›c Ä‘Ã³ Äƒn, ta sáº½ thá»­ cá»™t thá»© . Náº¿u ta tÃ¬m Ä‘Æ°á»£c má»™t vÃ­ trÃ­ Ä‘áº·t kháº£ dÄ© (a feasible position), ta sáº½ Ä‘áº·t vÃ o Ä‘Ã³ vÃ  gá»i Ä‘á»‡ quy Ä‘á»ƒ Ä‘áº·t hÃ ng thá»© . Giáº£ mÃ£ nhÆ° sau:


Â 
Code cá»§a giáº£ mÃ£ báº±ng C. Code Ä‘áº§y Ä‘á»§ Ä‘Æ°á»£c cho á»Ÿ cuá»‘i bÃ i.Â 
 lÃ  má»™t cÃ¡ch nhÃ¬n khÃ¡c cá»§a thuáº­t toÃ¡n. TÆ°á»Ÿng tÆ°á»£ng ta cÃ³ má»™t cÃ¢y vá»›i gá»‘c tÆ°á»£ng trÆ°ng cho cáº¥u hÃ¬nh ban Ä‘áº§u cá»§a bÃ n cá» (máº£ng  gá»“m toÃ n 0). NÃºt con cá»§a gá»‘c, gá»i lÃ  nÃºt level 1, lÃ  cÃ¡c cÃ¡ch Ä‘áº·t má»™t quÃ¢n háº­u vÃ o hÃ ng thá»© 1.  NÃºt con cá»§a má»™t nÃºt level 1, gá»i lÃ  nÃºt level 2, lÃ  cÃ¡c cÃ¡ch Ä‘áº·t kháº£ dÄ© má»™t quÃ¢n háº­u vÃ o hÃ ng thá»© 2. Cá»© nhÆ° tháº¿ Ä‘áº¿n nÃºt level  () ta sáº½ thu Ä‘Æ°á»£c má»™t cÃ¢y gá»i lÃ  cÃ¢y Ä‘á»‡u quy. CÃ³ thá»ƒ tháº¥y ráº±ng thuáº­t toÃ¡n quay lui á»Ÿ trÃªn thá»±c ra chÃ­nh lÃ  má»™t cÃ¡ch duyá»‡t cÃ¢y theo chiá»u sÃ¢u cho Ä‘áº¿n khi tÃ¬m Ä‘Æ°á»£c má»™t nÃºt á»Ÿ level .  HÃ¬nh minh há»a sau vá»›i  Ä‘Æ°á»£c láº¥y tá»« []

CÃ³ thá»ƒ tháº¥y thuáº­t toÃ¡n trÃªn cÃ³ thá»i gian cá»¡ . Tuy nhiÃªn náº¿u báº¡n cáº§n má»™t lá»i giáº£i báº¥t kÃ¬, bÃ i toÃ¡n nÃ y cÃ³ cÃ´ng thá»©c giáº£i vÃ  báº¡n chá»‰ máº¥t thá»i gian Ä‘á»ƒ in lá»i giáº£i ra ()[]. Sudoku lÃ  má»™t trÃ² chÆ¡i khÃ¡ phá»• biáº¿n vÃ  cháº¯c ai (readers of this bog) cÅ©ng biáº¿t. TrÃ² chÆ¡i nhÆ° sau: cÃ³ má»™t hÃ¬nh vuÃ´ng Ä‘Æ°á»£c chia thÃ nh 9x9 Ã´ vuÃ´ng con. Má»—i Ã´ vuÃ´ng con cÃ³ giÃ¡ trá»‹ trong khoáº£ng tá»« 1 Ä‘áº¿n 9. Ban Ä‘áº§u hÃ¬nh vuÃ´ng cÃ³ má»™t sá»‘ Ã´ vuÃ´ng con cho trÆ°á»›c (cÃ³ Ä‘iá»n sáºµn sá»‘) vÃ  cÃ²n láº¡i lÃ  trá»‘ng. HÃ£y Ä‘iá»n cÃ¡c sá»‘ tá»« 1-9 vÃ o cÃ¡c Ã´ con láº¡i sao cho: hÃ ng ngang lÃ  cÃ¡c sá»‘ khÃ¡c nhau tá»« 1 Ä‘áº¿n 9, hÃ ng dá»c lÃ  cÃ¡c sá»‘ khÃ¡c nhau tá»« 1 Ä‘áº¿n 9, vÃ  má»—i khá»‘i 3x3 chÃ­nh lÃ  cÃ¡c sá»‘ khÃ¡c nhau tá»« 1 Ä‘áº¿n 9. VÃ­ dá»¥ má»™t cÃ¢u Ä‘á»‘ vÃ  lá»i gáº£i tÆ°Æ¡ng á»©ng nhÆ° sau (hÃ¬nh Ä‘Æ°á»£c láº¥y tá»« ):
Trong bÃ i nÃ y mÃ¬nh sáº½ giá»›i thiá»‡u cÃ¡ch giáº£i sudoku báº±ng thuáº­t toÃ¡n quay lui. Ã tÆ°á»Ÿng cá»§a thuáº­t toÃ¡n cÅ©ng giá»‘ng bÃ i toÃ¡n  quÃ¢n háº­u. Má»—i bÆ°á»›c tÃ¬m táº­p cÃ¡c giÃ¡ trá»‹ kháº£ dÄ© Ä‘á»ƒ Ä‘iá»n vÃ o Ã´ trá»‘ng, vÃ  sau Ä‘Ã³ Ä‘á»‡ quy Ä‘á»ƒ Ä‘iá»n Ã´ tiáº¿p theo. Giáº£ mÃ£ cá»§a thuáº­t toÃ¡n (á»Ÿ Ä‘Ã¢y chÃº Ã½ máº£ng chá»‰ cÃ³ kÃ­ch thÆ°á»›c ). Thá»§ tá»¥c  kiá»ƒm tráº£ xem giÃ¡ trá»‹  cÃ³ kháº£ dÄ© vá»›i Ã´  khÃ´ng. Â 
Code cá»§a giáº£ mÃ£ trÃªn báº±ng C:Â 
Giáº£ mÃ£ cá»§a thá»§ tá»¥c  nhÆ° sau:Â 
Code báº±ng C cá»§a giáº£ mÃ£ (code Ä‘áº§y Ä‘á»§ Ä‘Æ°á»£c cho á»Ÿ cuá»‘i bÃ i):Â Subset Sum lÃ  má»™t trong nhá»¯ng . Trong bÃ i nÃ y chÃºng ta sáº½ thiáº¿t káº¿ thuáº­t toÃ¡n quay lui Ä‘á»ƒ giáº£i bÃ i toÃ¡n Subset Sum. Â 
VÃ­ dá»¥:  vÃ  . Lá»i giáº£i lÃ  true vÃ¬ táº­p con  cá»§a  cÃ³ tá»•ng báº±ng 12.Ã tÆ°á»Ÿng cá»§a thuáº­t toÃ¡n quay lui dá»±a trÃªn quan sÃ¡t sau: xÃ©t má»™t pháº§n tá»­ , tá»“n táº¡i má»™t dÃ£y con cÃ³ tá»•ng báº±ng  náº¿u má»™t trong hai Ä‘iá»u kiá»‡n sau lÃ  Ä‘Ãºng:Giáº£ mÃ£ nhÆ° sau:Â 
Code cá»§a giáº£ mÃ£ báº±ng C:Â  á» má»—i bÆ°á»›c cá»§a thuáº­t toÃ¡n quay lui, ta gá»i Ä‘á»‡ quy hai láº§n trÃªn máº£ng con cá»§a  vá»›i kÃ­ch thÆ°á»›c nhá» hÆ¡n 1. Ta cÃ³:  Â Code: , , ,   , UIUC.
 
 Cho má»™t máº£ng  pháº§n tá»­ . TÃ¬m má»™t dÃ£y dÃ i nháº¥t ( lá»›n nháº¥t) cÃ¡c chá»‰ sá»‘    . Cho má»™t dÃ£y , tÃ¬m dÃ£y con gia tá»‘c dÃ i nháº¥t cá»§a . TÃ¬m cÃ´ng thá»©c Ä‘á»‡ quy cho bÃ i toÃ¡n, dá»±a vÃ o Ä‘Ã³ thiáº¿t káº¿ giáº£i thuáº­t quay lui. HÃ£y sá»­a Ä‘á»•i thuáº­t toÃ¡n quay lui á»Ÿ trÃªn cá»§a bÃ i toÃ¡n Subset Sum Ä‘á»ƒ in ra Ã­t nháº¥t má»™t dÃ£y con cÃ³ tá»•ng báº±ng  cá»§a .  , , , , Trackback link:  on                     ChÃ o anh, em Ä‘á»c code giáº£i sudoku cá»§a anh cÃ³ Ä‘oáº¡n em khÃ´ng hiá»ƒu láº¯m áº¡:if(feasible(S, x, y, k) != 0) {
				S[x][y] = k;
				solve_sudoku(S, x, y+1);
				S[x][y] = 0;
			}táº¡i sao sau khi gá»i láº¡i hÃ m solve_sudoku(S, x, y+1) láº¡i pháº£i gÃ¡n S[x][y] = 0 váº­y áº¡? on                     Hi báº¡n MuaXuan,
Náº¿u báº¡n Ä‘á»ƒ Ã½ kÄ©, hÃ m feasible(S,x,y,k) cá»§a mÃ¬nh Ä‘Ãºng náº¿u Ä‘áº§u vÃ o lÃ  Ã´ . Do Ä‘Ã³ sau má»—i láº§n thá»­ Ä‘áº·t  vÃ o Ã´ , mÃ¬nh gÃ¡n láº¡i Ã´ nÃ y báº±ng . Thá»±c ra, náº¿u Ä‘á»ƒ Ã½ kÄ©, báº¡n sáº½ tháº¥y ta khÃ´ng nháº¥t thiáº¿t pháº£i lÃ m nhÆ° váº­y. Báº¡n cÃ³ thá»ƒ Ä‘áº·t lá»‡nh gÃ¡n  ra ngoÃ i vÃ²ng láº·p for(k = 1; k <= 9; k++). LÃ½ do ta pháº£i gÃ¡n báº±ng 0 lÃ  nhÆ° sau:

Giáº£ sá»­ Ã´ trÆ°á»›c khi gÃ¡n giÃ¡ trá»‹ cho  lÃ  Ã´  (cáº£ hai Ã´   ban Ä‘áº§u lÃ  rá»—ng). Náº¿u báº¡n váº½ cÃ¢y Ä‘á»‡ quy ra, báº¡n sáº½ tháº¥y má»—i láº§n thá»­ , báº¡n sáº½ gÃ¡n má»i giÃ¡ trá»‹ cÃ³ thá»ƒ cÃ³ cho Ã´ tiÃªp theo . Sau khi thá»­ , báº¡n thá»­ . Khi thá»­ , báº¡n láº¡i pháº£i thá»­ láº¡i toÃ n bá»™ giÃ¡ trá»‹ cÃ³ thá»ƒ cá»§a . Do Ä‘Ã³, trÆ°á»›c khi thá»­ gÃ¡n , báº¡n pháº£i Ä‘áº£m báº£o  Ä‘á»ƒ code cháº¡y Ä‘Ãºng.

Hi vá»ng mÃ¬nh tráº£ lá»i Ä‘Ãºng cÃ¢u há»i cá»§a báº¡n. Náº¿u báº¡n váº«n tháº¥y chÆ°a hoÃ n toÃ n tráº£ lá»i Ä‘Æ°á»£c, báº¡n cÃ³ thá»ƒ comment mÃ¬nh sáº½ giáº£i thÃ­ch thÃªm.
 on                     Náº¿u nhÆ° váº­y thÃ¬ sau láº§n cuá»‘i cÃ¹ng tháº¿ k vÃ o hÃ m feasible(láº§n láº·p cuá»‘i cÃ¹ng) thÃ¬ S[x][y] cÅ©ng dc gÃ¡n = 0 thÃ¬ Ä‘Ã¡ng lÃ½ ra cÃ¡c Ã´ S[x][y] = rá»—ng ban Ä‘áº§u sau Ä‘Ã³ cÅ©ng Ä‘á»u = 0 háº¿t chá»© sao nÃ³ láº¡i lÆ°u láº¡i Ä‘Æ°á»£c 1 giÃ¡ trá»‹ khÃ¡c 0 váº­y báº¡n ? MÃ¬nh váº«n chÆ°a hiá»ƒu láº¯m, mong báº¡n giÃºp Ä‘á»¡ mÃ¬nh. Cáº£m Æ¡n nhiá»u nhÃ© báº¡n. on                     Khi láº§n cuá»‘i cÃ¹ng báº¡n gÃ¡n má»™t giÃ¡ trá»‹ vÃ o, vÃ  gá»i Ä‘á»‡ quy láº§n cuá»‘i thÃ¬ lÃºc Ä‘Ã³ thá»§ tá»¥c sáº½ in ra luÃ´n (2 cÃ¢u lá»‡nh if Ä‘áº§u tiÃªn cá»§a thá»§ tá»¥c SUDOKU). Sau khi Ä‘Ã£ in ra rá»“i thÃ¬ thá»§ tá»¥c sáº½ exit. Náº¿u Ä‘á»ƒ Ã½ pháº§n code báº±ng C minh há»a thÃ¬ sáº½ cÃ³ cÃ¢u lá»‡nh exit(0) Ä‘á»ƒ thoÃ¡t luÃ´n khá»i chÆ°Æ¡ng trÃ¬nh ngay sau khi nÃ³ tÃ¬m Ä‘Æ°á»£c lá»i giáº£i. on                     Ohhhh ra lÃ  váº­y, mÃ¬nh hiá»ƒu r, cáº£m Æ¡n báº¡n nhiá»u nha. on                     Ban Ä‘áº§u em cÅ©ng nghÄ© nhÆ° váº­y nhÆ°ng khÃ´ng cháº¯c nÃªn Ä‘Ã£ há»i, cáº£m Æ¡n anh Ä‘Ã£ tráº£ lá»i ğŸ™‚ on                     KhÃ´ng cÃ³ gÃ¬! CÃ¡m Æ¡n báº¡n Ä‘Ã£ ghÃ© thÄƒm. on                     á» pháº§n giáº£ mÃ£ cá»§a bÃ i "n Queens": KhÃ´ng biáº¿t cÃ³ pháº£i lÃ  e hiá»ƒu sai khÃ´ng nhÆ°ng nghÄ© vÃ²ng láº·p lá»›n pháº£i cho "j" cháº¡y tá»« 1  -> n chá»© sao láº¡i lÃ  "i" áº¡? on                     ÄÃºng rá»“i báº¡n. MÃ¬nh gÃµ sai. Trong pháº§n code tháº­t thÃ¬ mÃ¬nh Ä‘á»ƒ lÃ  j. CÃ¡m Æ¡n báº¡n Ä‘Ã£ chá»‰ ra lá»—i. on                     anh cÃ³ thá»ƒ gá»£i Ã½ bÃ i dÃ£y gia tá»‘c Ä‘Æ°á»£c khÃ´ng áº¡ ? on                     cho mÃ¬nh há»i cÃ³ thá»ƒ Ã¡p dá»¥ng giáº£i thuáº­t quay lui nÃ y Ä‘á»ƒ giáº£i bÃ i toÃ¡n mÃ£ Ä‘i tuáº§n Ä‘Æ°á»£c khÃ´ng? on                     Hi báº¡n,
CÃ¢u tráº£ lá»i lÃ  cÃ³ nhÃ©. Quay lui cÃ³ thá»ƒ Ã¡p dá»¥ng cho táº¥t cáº£ cÃ¡c bÃ i toÃ¡n mÃ  báº¡n gáº·p trong thá»±c táº¿. Váº¥n Ä‘á» chá»‰ lÃ  nhanh hay cháº­m mÃ  thÃ´i.HÃ¹ng on                     Em chaÌ€o anh , em cuÌƒng Ä‘ang bÄƒÌt Ä‘Ã¢Ì€u laÌ€m quen vÆ¡Ìi caÌc thuÃ¢Ì£t toaÌn cÆ¡ baÌ‰n naÌ€y. Anh cho em hoÌ‰i Æ¡Ì‰ baÌ€i nQueens taÌ£i sao laÌ£i laÌ€ Q[i]=j+r-i vaÌ€ Q[i]=j-r+i vÃ¢Ì£y aÌ£ ? on                     Hi ChÃ¢u,
ÄÃ³ lÃ  Ä‘iá»u kiá»‡n kiá»ƒm tra xem náº¿u Ä‘áº·t vÃ o Ã´ [r,j] thÃ¬ á»Ÿ Ä‘Æ°á»ng chÃ©o xuÃ´i vÃ  ngÆ°á»£c giao nhau táº¡i [r,j] Ä‘Ã£ Ä‘áº·t quÃ¢n háº­u nÃ o trÆ°á»›c Ä‘Ã³ hay chÆ°a.Best,
HÃ¹ng on                     Anh cÃ³ thá»ƒ Ä‘Æ°a bÃ i giáº£i cá»§a pháº§n bÃ i táº­p khÃ´ng áº¡? Em máº§n nÃ¡t Ã³c máº¥y hÃ´m nay mÃ  chÆ°a giáº£i ná»•i on                     Hi báº¡n,
Cá»¥ thá»ƒ báº¡n muá»‘n gá»£i Ã½ bÃ i  nÃ o? MÃ¬nh cÃ³ láº½ sáº½ khÃ´ng cÃ³ lá»i giáº£i hoÃ n chá»‰nh nhÆ°ng sáº½ gá»£i Ã½ Ä‘áº¿n má»©c cá»¥ thá»ƒ nháº¥t cÃ³ thá»ƒ.HÃ¹ng on                     BÃ i 1 anh Æ¡i. Em khÃ´ng biáº¿t pháº£i lÃ m tháº¿ nÃ o Ä‘á»ƒ nÃ³ quay lui trong bÃ i toÃ¡n nÃ y. Em cáº£m Æ¡n anh trÆ°á»›c on                     Hmm,
MÃ¬nh khÃ´ng biáº¿t gá»£i Ã½ nÃ y cÃ³ há»¯u dá»¥ng hay khÃ´ng, báº¡n cÃ³ thá»ƒ thá»­ ngáº«m nghÄ©. Báº¡n dÃ¹ng thÃªm má»™t biáº¿n $j$ Ä‘á»ƒ lÆ°u trá»¯ pháº§n tá»­ cuá»‘i cÃ¹ng trong dÃ£y con tÄƒng Ä‘Ã£ tÃ¬m Ä‘Æ°á»£c khi tá»›i bÆ°á»›c Ä‘á»‡ quy hiá»‡n táº¡i. Sau Ä‘Ã³ xÃ©t thÃªm má»™t pháº§n tá»­ má»›i $A[i]$ trong bÆ°á»›c Ä‘á»‡ quy hiá»‡n táº¡i vÃ  so sÃ¡nh $A[i]$ vá»›i $A[j].$ Náº¿u $A[i] \geq A[j]$ thÃ¬ báº¡n cÃ³ thá»ƒ lá»±a chá»n cho $A[i]$ vÃ o dÃ£y con tÄƒng hay khÃ´ng vÃ  Ä‘á»‡ quy tiáº¿p. Náº¿u khÃ´ng thÃ¬ báº¡n bá» qua $A[i]$ vÃ  xÃ©t $A[i+1]$Best,
HÃ¹ng on                     BÃ i toÃ¡n Subset sum hÃ¬nh nhÆ° thiáº¿u Ä‘iá»u kiá»‡n máº£ng X lÃ  máº£ng khÃ´ng Ã¢m.
Thanks on                     ÄÃºng rá»“i, cÃ¡m Æ¡n báº¡n. MÃ¬nh Ä‘Ã£ bá»• sungPowered by  and 