Cơ sở toán học của phép băm II: xích ngăn cách -- Mathematical foundation of hashing II
http://www.giaithuatlaptrinh.com/?p=983
Nơi tổng hợp và chia sẻ những kiến thức liên quan tới giải thuật nói chung và lý thuyết khoa học máy tính nói riêng.   in  | Trong bài , chúng ta đã nghiên cứu cách thiết kế bảng băm và ba phương pháp giải quyết xung đột cơ bản: xích ngăn cách (chaining), băm địa chỉ mở (open addressing) và băm hoàn hảo (perfect hashing). Bài này chúng ta sẽ phân tích kĩ hơn phương pháp xích ngăn cách. Cụ thể chúng ta sẽ tìm câu trả lời cho các câu hỏi:Câu trả lời cho câu hỏi đầu tiên sẽ cho chúng ta biết, khi chúng ta tìm kiếm một khóa thì trung bình chúng ta sẽ mất bao nhiêu thời gian. Câu trả lời cho câu hỏi thứ hai sẽ cho chúng ta biết trong trường hợp , chúng ta sẽ mất bao nhiêu thời gian để tìm kiếm một khóa. Gọi  là số phần tử ta muốn lưu trữ trong bảng băm; các phần tử này xuất phát từ một tập gốc . Bảng băm của chúng ta có kích thước . Để băm vào bảng, ta sử dụng một hàm ; hàm băm này được chọn ngẫu nhiên từ một họ hàm băm . Bằng cách chọn ngẫu nhiên như vậy,  thỏa mãn:  Dấu  ở đây có nghĩa là "tỉ lệ với",i.e,  với một hằng số  nào đó. Điểm quan trọng nhất mà bạn đọc cần nhớ ở đây: chúng ta không có bất kì giả sử nào về dữ liệu (i.e chúng ta sẽ không giả sử dữ liệu đầu vào là ngẫu nhiên). Tất cả các phân tích ngẫu nhiên ở đây đến từ việc chọn hàm băm ngẫu nhiên. Do đó, nếu ta có định sẵn một hàm băm thì tất cả các phân tích dưới đây đều vô nghĩa. Nhắc lại hệ số tải:   Cố định một khóa . Gọi  là  chiều dài của danh sách lưu khóa . Gọi  là biến ngẫu nhiên  trong đó  nếu  được băm vào cùng ô với  và  nếu ngược lại.  Do  là biến ngẫu nhiên , ta có:  Ngoài ra, ta có thể biểu diễ  dưới dạng các biến   như sau:  Do đó, theo tính tuyến tính của kì vọng:  Như vậy, chiều dài trung bình của một xích trong bảng băm tỉ lệ với hệ số tải .Để phân tích chiều dài của danh sách dài nhất, ta sẽ xem xét mô hình ném bóng vào rổ () dưới đây. Mô hình này sẽ tương ứng với trường hợp hệ số tải . Trước khi trả lời câu hỏi trên, chúng ta sẽ xem xét một vài câu hỏi đơn giản hơn để có một cách nhìn sâu hơn về bài toán này.  Một số bạn có lẽ quen với cách kí hiệu số tổ hợp . Trong bài này mình dùng kí hiệu  để nhất quán với các kí hiệu của Wikipedia. Xác suất để rổ 1 có ít nhất một quả bóng là bao nhiêu? Xác suất khi ném ngẫu nhiên một quả bóng  vào rổ 1 là . Do đó, xác suất khi ta ném ngẫu nhiên (độc lập)  quả bóng mà không quả nào vào rổ 1 là . Sử dụng xấp xỉ , ta có xác suất không quả bóng nào vào rổ 1 là . Như vậy, xác suất để rổ 1 có ít nhất 1 quả bóng là . Xác suất để rổ 1 có   quả bóng là bao nhiêu?  Ở trên, ta sử dụng xấp xỉ (xem ):   Xác suất để rổ 1 có   quả bóng là bao nhiêu?   Xác suất để tồn tại một rổ bất kì trong số  rổ có   quả bóng là bao nhiêu?  Bây giờ chúng ta có thể trả lời một số câu hỏi thú vị hơn về mô hình này.  
 Ta sẽ chứng minh phiên bản dễ hơn một chút: với xác suất , mọi rổ có không quá  quả bóng. Cách chứng minh ta sẽ trình bày có thể áp dụng (bằng một sửa đổi nhỏ) để chứng minh Lemma 1. Chi tiết coi như bài tập cho bạn đọc.Ta sẽ tìm xác suất để  một rổ có ít nhất  quả bóng. Áp dụng câu hỏi 4 với , ta có:  Do đó, xác suất để  có tối đa  quả bóng là .Lemma 1 cho chúng ta biết, nếu sử dụng xích ngăn cách khi hệ số tải , với xác suất cao, danh sách dài nhất có   phần tử. Câu hỏi còn lại là với xác suất cao, danh sách dài nhất có  bao nhiêu phần tử? Chứng minh Lemma 2 khó hơn Lemma 1 rất nhiều. Bạn đọc quan tâm có thể tham khảo thêm tại [1] (Lemma 5.12).Kết hợp Lemma 1 và 2, ta suy ra với xác suất , danh sách dài nhất có  phần tử. Nếu ta ném  quả bóng vào  cái rổ khi  thì với xác suất cao, rổ đầy nhất sẽ có khoảng  quả bóng. Chi tiết xem thêm tại [3]. Trong mô hình ném bóng vào rổ, khi ném một quả bóng, thay ném ngẫu nhiên vào rổ bất kì, ta sẽ chọn ra ngẫu nhiên 2 rổ và đặt quả bóng vào rổ có ít bóng hơn. Câu hỏi mà chúng ta quan tâm là: 
Ta sẽ chứng minh: Chứng minh một cách đầy đủ Lemma 3 không hề đơn giản. Phương pháp chứng minh hay sử dụng cho bài toán này là quy nạp theo lớp (layered induction) (Xem thêm tại [1], Theorem 14.1). "Chứng minh" mình sẽ trình bày dưới đây ([5]) đã đơn giản hóa rất nhiều và hi vọng sẽ cho bạn đọc một cách nhìn về bài toán. "Chứng minh" này không phải là một chứng minh toán học đầy đủ.  Gọi chiều cao của một quả bóng là  nếu quả bóng đó là quả bóng thứ  được đưa vào rổ (chứa nó). Do rổ có ít nhất  quả bóng sẽ chứa ít nhất một quả bóng có chiều cao ít nhất là , ta có: Số quả bóng có chiều cao  nhiều hơn số rổ có ít nhất  quả bóngGọi  là số rổ có ít nhất  quả bóng và đặt . Một quả bóng có chiều cao ít nhất  khi và chỉ khi ta chọn được hai rổ có ít nhất  quả bóng.  Xác suất đó là . Do đó:  Do , ta có công thức đệ quy:  Do ta chỉ có tối đa  rổ có ít nhât  quả bóng, suy ra . Giải công thức đệ quy   ta được . Ta chọn  sao cho  (tương đương với ), ta suy ra  (dpcm).[1] Michael Mitzenmacher and Eli Upfal. . Cambridge University Press, New York, NY, USA, 2005.
[2] Shuchi Chawla. . University of Wisconsin, 2007.
[3] Martin Raab and Angelika Steger. . In RANDOM '98, Springer-Verlag, 159-170, 1998.
[4] Michael Mitzenmacher.  Parallel and Distributed Systems, IEEE Transactions on 12.10 (2001): 1094-1104.
[5] Anupam Gupta. , CMU.
[6] Udi Wieder. . Windows on Theory blog post, Accessed May/2016.
[7] Richard M. Karp, Michael Luby, and Friedhelm Meyer auf der Heide. . In Proceedings of the twenty-fourth annual ACM symposium on Theory of computing (STOC '92). ACM, New York, NY, USA, 318-326, 1992.  , , , , , Trackback link: Powered by  and 